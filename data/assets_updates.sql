# Перенос названия предмета в title
UPDATE assets
SET
    title       = SUBSTRING_INDEX(description, '\n', 1),
    description = IF(
        LOCATE('\n', description) > 0,
        TRIM(SUBSTRING(description, LOCATE('\n', description) + 1)),
        NULL
                  )
WHERE description IS NOT NULL;

# Перенос дропа с мобов в drop_monster
UPDATE assets
SET
    drop_monster = TRIM(SUBSTRING(
        SUBSTRING_INDEX(description, 'Дроп c монстров:', -1),
        2
                        )),
    description  = TRIM(SUBSTRING_INDEX(description, 'Дроп c монстров:', 1))
WHERE description LIKE '%Дроп c монстров:%';

### Проставление типа приёма ###
-- Заполняем активные
UPDATE assets
SET skill_type = 'активный'
WHERE description LIKE '%для изучения боевого приема%';

-- Заполняем пассивные
UPDATE assets
SET skill_type = 'пассивный'
WHERE description LIKE '%для изучения навыка%';

### Проставление типа ###
-- Рецепты
UPDATE assets SET type = 'рецепт' WHERE title LIKE '%Рецепт%';

-- Свитки
UPDATE assets SET type = 'свиток' WHERE title LIKE '%Свиток%';

-- Эликсиры и зелья
UPDATE assets SET type = 'зелье' WHERE title REGEXP 'Эликсир|Зелье';

-- Внешний вид (скины)
UPDATE assets SET type = 'внешний вид' WHERE title LIKE '%Внешний вид%' OR title LIKE '%Личный внешний вид%';

-- Таланты
UPDATE assets SET type = 'талант' WHERE title REGEXP 'Талант|личный талант|случайный.*талант';

-- Квестовые предметы
UPDATE assets SET type = 'квест' WHERE title LIKE '%квест%' OR description LIKE '%квест%';

-- Чертежи
UPDATE assets SET type = 'чертеж' WHERE title LIKE '%Чертеж%' OR title LIKE '%Рукоять%' OR title LIKE '%Навершие%' OR title LIKE '%Крепление%';

-- Крафт-материалы (дерево, металл, ткань)
UPDATE assets SET type = 'материал' WHERE title REGEXP
    'Сосна|Дуб|Бук|Амарант|Олово|Медь|Сталь|Вольфрам|Титан|Криолит|Морозная руда|Морозный кристалл|
    Грубый металл|Алмаз|Биотоковая|Костный порошок|Клей|Панцирь|Пластина|Древко|Эфес|Основа для щита|
    Запчасть|Обожженн|Пропитан|Вымочен|Ткань|Кожа|Кость|Хвост|Кровь|Лапки|Ребра|Зубы|Шкура|
    Чешуя|Хитин|Перо|Плазма|Субстанция|Экстракт|Реагент|Эмульгатор|Фермент|Мутаген|Вещество|
    Материя|Морозн|Кирпич|Биоток|Водоросли|Слиток|Грязь монстра|Криолит';

-- Еда
UPDATE assets SET type = 'еда' WHERE title REGEXP
    'Яблоко|Груша|Апельсин|Банан|Кокос|Лимон|Манго|Личи|Арбуз|Ягод|Виноград|Вишня|Клубника|
    Мука|Яйцо|Масло|Вода|Соус|Перец|Пряност|Молоко|Сливки|Сахар|Мёд|Сироп|Орехи|Цукаты|
    Ваниль|Карамель|Шоколад|Сгущ|Бисквит|Тесто|Коржи|Торт|Пирог|Печенька|Конфета|Леденец|
    Ириска|Посыпка|Крем|Мясо|Рыб|Суп|Салат|Похлебка|Хлеб|Десерт|Блюд|Лечо|Продовольствие|
    Чай|Эль|Пинта|Кусок мяса|Потроха|Кулич|Ингридиент';

-- Валюта и монеты
UPDATE assets SET type = 'валюта' WHERE title REGEXP
    'Монета|Медаль|Марка|Ржавая монета|Серебряная монета|Золотая монета|Двимеритовая монета|Лунная монета';

-- Контейнеры и наборы
UPDATE assets SET type = 'контейнер' WHERE title REGEXP
    'Box|Сундук|Набор|Арсенал|Запас|Комплект|Корзина|Сумка|Телега|Продуктовая|Торба|Кейс|Котомка';

-- Документы и пропуска
UPDATE assets SET type = 'документ' WHERE title REGEXP
    'Сертификат|Пригласительное|Ведомость|Право выбора|Рекомендация|Соглашение|Петиция|Документ|
    Миледонский договор|Решение по принцу|Знание|Обрывок знания|Запись';

-- Декор и ивент-предметы без типа
UPDATE assets SET type = 'ивент' WHERE title REGEXP
    'Елочная|Новогодн|Снеговик|Снежинк|Гирлянд|Фонарик|Фейерверк|Салют|Валентинк|
    Тюльпан|Ибис|Фиалка|Букет|Цветы|Роза|Пасхальн|Рождественск|Свадебн|Подарок|
    Игрушка.*медведь|Бант|Шар.*ивент|Снег.*ивент|Морковка.*ивент|Стакан майонеза';

-- Прочие уникальные
UPDATE assets SET type = 'прочее' WHERE title REGEXP
    'Рупор|Очки|Шарф|Карма|Энергетик|Ремкомплект|Отмычка|Ключ|Метка|Пропуск|Билет|
    Лотерея|Бонус|Сброс|Право|Нашивка|Знак|Трофей|Коллекция|Часть щупальца|Карта сокровищ|
    Зов странника|Комплимент|Благословен|Рупор|Табличка';











-- Материалы (металл, камни, природные ресурсы)
UPDATE assets SET type = 'материал' WHERE title REGEXP
    'Материя|Грубый металл|Черепа|Клешни|Философский камень|Обожженный философский|
    Свеча для обжига|Запчасть|Кровавый уголь|Камень хаоса|Лунный камень|Камень гармонии|
    Белый кавелит|Аркенстон|Морозн|Криолит|Ледяная глыба|Руна|Крыло нетопыря|Крылья летучей|
    Пятая лапа|Мозг|Ритуальный клинок|Сфера поглощения|Магическая печать|Пещерный гриб|
    Миледокунь|Чиртец|Йелдемский|Морской циртец|Ракушка|Антидот|Тыквенная семечка|
    Семена чеснока|Семена лука|Семена моркови|Семена перца|Яд змеи';

-- Еда и напитки
UPDATE assets SET type = 'еда' WHERE title REGEXP
    'Аквельский обед|Горячий чай|Молочная начинка|Темная начинка|Стакан молока|
    Зеленый горошек|Овощная заготовка|Кавельский чеснок|Аквельский лук|Дрангарская морковь|
    Ложка для взбивания|Кондитерский лед|Медвежья вырезка|Ириска|Ваниль';

-- Ивент-предметы
UPDATE assets SET type = 'ивент' WHERE title REGEXP
    'Игрушка.*медведь|Ведро.*ивент|Огурцы.*ивент|Морковь.*ивент|Картофель.*ивент|
    Яйца.*ивент|Тыквенная голова|Тыква|Звезда|Снежный ирис|Праздничный фонарь|
    Праздничный пакет|Воздушный шар';

-- Квест
UPDATE assets SET type = 'квест' WHERE title REGEXP
    'Часть экипировки разбойников|Экипировка разбойника|Оружие зараженного|
    Броня лазутчика|Оружие истребителя|Щит храмовника|Кулон эртуса|
    Доспехи для переплавки|Доказательство превосходства|Молот курда|Часть карты сокровищ';

-- Документы
UPDATE assets SET type = 'документ' WHERE title REGEXP
    'Миледонский договор|Стих посвященный|Королевское одобрение|Приглашения на свадьбу|
    Песня|Песнь признания|Очиститель для бумаги|Пустынные чернила|Особые пустынные чернила';

-- Прочее
UPDATE assets SET type = 'прочее' WHERE title REGEXP
    'Личный сброс|Моментальная лотерея|Контейнер|Ваше здоровье|Старый башмак|
    Роскошный башмак|Трезубец|Специальное лекарство|Челендж пройден|Амулет главаря|
    Удача торговца|Богатство торговца|Регенерации|Сосновая мебель|Металлическая посуда|
    Медная посуда|Приятные безделушки|Легкий бриз|Солнечный загар|Пляжная удача|
    Солнечная ракушка|Личная походная заплатка|Зов странника|Детская лента|
    Ледяная удача|Кусок карты сокровищ';
-- Материал материи - это материал
UPDATE assets SET type = 'материал' WHERE title LIKE '%Материал материи%';

-- Еда
UPDATE assets SET type = 'еда' WHERE title REGEXP
    'Зеленый горошек|Ложка для взбивания|Семена розы|Семена чеснока|Тюльпан|Свеча для обжига';

-- Ивент
UPDATE assets SET type = 'ивент' WHERE title REGEXP
    'Яйца.*ивент|Праздничный пакет|Ледяная удача кощара';

-- Квест
UPDATE assets SET type = 'квест' WHERE title REGEXP
    'Броня лазутчика|Доспехи для переплавки|Миледокунь';

-- Прочее
UPDATE assets SET type = 'прочее' WHERE title REGEXP
    'Белый кавелит|Роскошный башмак|Удача торговца|Личный.*сброс|
    Стих посвященный|Медная посуда|Пятая лапа|Песня';

